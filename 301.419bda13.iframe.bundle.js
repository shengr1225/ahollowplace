"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[301],{84335:function(e,r,a){var l=a(27378),t=a(74857),n=a(30799),i=a(60622);r.Z=function(e){var r,a,o,u,m,s,d,c,w=(0,n.a)(),f=w.currentUser,v=w.isAuthenticated;return l.createElement("div",{className:"rw-form-wrapper"},l.createElement(t.Form,{onSubmit:function(r){var a;r.jubenId=parseInt(r.jubenId),e.onSave(r,null==e||null===(a=e.review)||void 0===a?void 0:a.id)},error:e.error},l.createElement(t.FormError,{error:e.error,wrapperClassName:"rw-form-error-wrapper",titleClassName:"rw-form-error-title",listClassName:"rw-form-error-list"}),l.createElement(t.Label,{name:"jubenId",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Juben id"),l.createElement(i.ZP,{id:null===(r=e.review)||void 0===r?void 0:r.jubenId,name:"jubenId"}),l.createElement(t.FieldError,{name:"jubenId",className:"rw-field-error"}),l.createElement(t.Label,{name:"dm",className:"rw-label",errorClassName:"rw-label rw-label-error"},"DM"),l.createElement(t.TextField,{name:"dm",defaultValue:null===(a=e.review)||void 0===a?void 0:a.dm,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(t.FieldError,{name:"dm",className:"rw-field-error"}),l.createElement(t.Label,{name:"rateOfJuben",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Rate of juben (1-5分)"),l.createElement(t.NumberField,{name:"rateOfJuben",defaultValue:null===(o=e.review)||void 0===o?void 0:o.rateOfJuben,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(t.FieldError,{name:"rateOfJuben",className:"rw-field-error"}),l.createElement(t.Label,{name:"reviewOfJuben",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Review of juben(关于剧本的评价)"),l.createElement(t.TextField,{name:"reviewOfJuben",defaultValue:null===(u=e.review)||void 0===u?void 0:u.reviewOfJuben,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"reviewOfJuben",className:"rw-field-error"}),l.createElement(t.Label,{name:"rateOfDM",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Rate of dm(1-5分)"),l.createElement(t.NumberField,{name:"rateOfDM",defaultValue:null===(m=e.review)||void 0===m?void 0:m.rateOfDM,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(t.FieldError,{name:"rateOfDM",className:"rw-field-error"}),l.createElement(t.Label,{name:"reviewOfDM",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Review of dm(关于DM的评价)"),l.createElement(t.TextField,{name:"reviewOfDM",defaultValue:null===(s=e.review)||void 0===s?void 0:s.reviewOfDM,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"reviewOfDM",className:"rw-field-error"}),l.createElement(t.Label,{name:"rateOfFood",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Rate of food(1-5)"),l.createElement(t.NumberField,{name:"rateOfFood",defaultValue:null===(d=e.review)||void 0===d?void 0:d.rateOfFood,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"rateOfFood",className:"rw-field-error"}),l.createElement(t.Label,{name:"reviewOfFood",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Review of food(关于剧本搭配食物的评价)"),l.createElement(t.TextField,{name:"reviewOfFood",defaultValue:null===(c=e.review)||void 0===c?void 0:c.reviewOfFood,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"reviewOfFood",className:"rw-field-error"}),l.createElement(t.Label,{name:"userId",className:"rw-label",errorClassName:"rw-label rw-label-error"},"UserId"),v&&l.createElement(t.NumberField,{name:"userId",defaultValue:f.id,className:"rw-input",readOnly:!0,errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"userId",className:"rw-field-error"}),l.createElement("div",{className:"rw-button-group"},l.createElement(t.Submit,{disabled:e.loading,className:"rw-button rw-button-blue"},"Save"))))}},88301:function(e,r,a){a.r(r),a.d(r,{default:function(){return b}});var l,t,n=a(27378),i=(a(95988),a(60740),a(31786)),o=a(27001),u=a(56423),m=a(81006),s=a(84335);function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=e[a];return l}function c(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var w=(0,o.ZP)(l||(l=c(["\n  query EditReviewById($id: Int!) {\n    review: review(id: $id) {\n      id\n      createdAt\n      jubenId\n      rateOfJuben\n      reviewOfJuben\n      rateOfDM\n      reviewOfDM\n      rateOfFood\n      reviewOfFood\n    }\n  }\n"]))),f=(0,o.ZP)(t||(t=c(["\n  mutation UpdateReviewMutation($id: Int!, $input: UpdateReviewInput!) {\n    updateReview(id: $id, input: $input) {\n      id\n      createdAt\n      jubenId\n      rateOfJuben\n      reviewOfJuben\n      rateOfDM\n      reviewOfDM\n      rateOfFood\n      reviewOfFood\n    }\n  }\n"]))),v=(0,i.createCell)({QUERY:w,Loading:function(){return n.createElement("div",null,"Loading...")},Failure:function(e){var r=e.error;return n.createElement("div",{className:"rw-cell-error"},null==r?void 0:r.message)},Success:function(e){var r,a,l=e.review,t=(0,i.useMutation)(f,{onCompleted:function(){m.toast.success("Review updated"),(0,u.navigate)(u.routes.reviews())},onError:function(e){m.toast.error(e.message)}}),o=(a=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,r){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,t,n,i,o=[],u=!0,m=!1;try{if(n=(a=a.call(e)).next,0===r){if(Object(a)!==a)return;u=!1}else for(;!(u=(l=n.call(a)).done)&&(o.push(l.value),o.length!==r);u=!0);}catch(e){m=!0,t=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(m)throw t}}return o}}(r,a)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,r):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],w=o[1],v=w.loading,b=w.error;return n.createElement("div",{className:"rw-segment"},n.createElement("header",{className:"rw-segment-header"},n.createElement("h2",{className:"rw-heading rw-heading-secondary"},"Edit Review ",null==l?void 0:l.id)),n.createElement("div",{className:"rw-segment-main"},n.createElement(s.Z,{review:l,onSave:function(e,r){c({variables:{id:r,input:e}})},error:b,loading:v})))},displayName:"EditReviewCell"}),b=function(e){var r=e.id;return n.createElement(v,{id:r})}}}]);