"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[85],{21866:function(e,r,a){a(95988),a(60740),a(76721),a(96085),a(39393),a(96083),a(72254);var n,t=a(27001),l=a(27378),i=a(57253),o=a(95173),s=a(74857),m=a(73487),c=a(13839),u=a(74083),d=a(18808);function b(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,t,l,i,o=[],s=!0,m=!1;try{if(l=(a=a.call(e)).next,0===r){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=l.call(a)).done)&&(o.push(n.value),o.length!==r);s=!0);}catch(e){m=!0,t=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(m)throw t}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return w(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=e[a];return n}var p,f,v=(0,t.ZP)(n||(p=["\n  mutation deletePhoto($id: Int!, $index: Int!) {\n    deletePhotoOfJuben(id: $id, index: $index) {\n      id\n      photos\n    }\n  }\n"],f||(f=p.slice(0)),n=Object.freeze(Object.defineProperties(p,{raw:{value:Object.freeze(f)}}))));r.Z=function(e){var r,a,n,t,w,p,f,E,N,h,y,S,g,C,j,F=b((0,i.D)(v,{onCompleted:function(e){m.toast.success("photo deleted"),A(e.deletePhotoOfJuben.photos)},onError:function(e){m.toast.error(e.message)}}),1)[0],x=b((0,l.useState)(null==e||null===(r=e.juben)||void 0===r?void 0:r.image),2),I=x[0],L=x[1],O=b((0,l.useState)(null==e||null===(a=e.juben)||void 0===a?void 0:a.photos),2),k=O[0],A=O[1],T=b((0,l.useState)(!1),2),P=T[0],J=T[1];return l.createElement("div",{className:"rw-form-wrapper"},l.createElement(s.Form,{onSubmit:function(r){var a,n,t,l=Object.assign(r,{image:I,photos:k});l.mvps&&l.mvps.length?l.mvps=null===(n=l.mvps)||void 0===n?void 0:n.map((function(e){return{id:parseInt(e)}})):delete l.mvps,l.timeSlots&&(l.timeSlots=null===(t=l.timeSlots)||void 0===t?void 0:t.map((function(e){return{id:parseInt(e)}}))),e.onSave(l,null==e||null===(a=e.juben)||void 0===a?void 0:a.id)},error:e.error},l.createElement(s.FormError,{error:e.error,wrapperClassName:"rw-form-error-wrapper",titleClassName:"rw-form-error-title",listClassName:"rw-form-error-list"}),l.createElement(s.Label,{name:"name",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Name"),l.createElement(s.TextField,{name:"name",defaultValue:null===(n=e.juben)||void 0===n?void 0:n.name,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"name",className:"rw-field-error"}),l.createElement(s.Label,{name:"timeSlots",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Timeslots"),l.createElement(c.ZP,{name:"timeSlots",selectTimeSlots:null===(t=e.juben)||void 0===t?void 0:t.timeSlots,multiple:!0}),l.createElement(s.FieldError,{name:"timeSlots",className:"rw-field-error"}),l.createElement(s.Label,{name:"score",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Score"),l.createElement(s.TextField,{name:"score",defaultValue:null===(w=e.juben)||void 0===w?void 0:w.score,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{valueAsNumber:!0}}),l.createElement(s.FieldError,{name:"score",className:"rw-field-error"}),l.createElement(s.Label,{name:"image",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Image"),l.createElement(o.RT,{apikey:"Awq6Bed0LTDqiIXJJdcrmz",onSuccess:function(e){L(e.filesUploaded[0].url)}},l.createElement("div",{style:{display:I?"none":"block",height:"500px"}})),I&&l.createElement("img",{alt:null===(p=e.juben)||void 0===p?void 0:p.name,src:(0,d.x7)(I),style:{marginTop:"2rem"}}),l.createElement(s.FieldError,{name:"image",className:"rw-field-error"}),l.createElement(s.Label,{name:"image",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Photos"),l.createElement(o.RT,{apikey:"Awq6Bed0LTDqiIXJJdcrmz",onSuccess:function(e){var r=k||"";e.filesUploaded.forEach((function(e){r&&(r+=","),r+=e.url})),A(r),J(!1)},pickerOptions:{maxFiles:10}},l.createElement("div",{style:{display:k&&!P?"none":"block",height:"100px"}})),l.createElement("div",{className:"flex"},k&&k.split(",").map((function(r,a){return l.createElement("div",{className:"mr-1",key:r},l.createElement("img",{alt:r,src:(0,d.jW)(r),style:{marginTop:"2rem"}}),l.createElement("button",{type:"button",onClick:function(){F({variables:{id:e.juben.id,index:a}})}},"Remove Image"))})),l.createElement("button",{type:"button",onClick:function(){J(!0)}},"Add Photos")),l.createElement(s.FieldError,{name:"image",className:"rw-field-error"}),l.createElement(s.Label,{name:"desc",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Desc"),l.createElement(s.TextField,{name:"desc",defaultValue:null===(f=e.juben)||void 0===f?void 0:f.desc,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"desc",className:"rw-field-error"}),l.createElement(s.Label,{name:"section",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Section"),l.createElement(s.TextField,{name:"section",defaultValue:null===(E=e.juben)||void 0===E?void 0:E.section,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"section",className:"rw-field-error"}),l.createElement(s.Label,{name:"sections",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Sections"),l.createElement(s.TextField,{name:"sections",defaultValue:null===(N=e.juben)||void 0===N?void 0:N.sections,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"sections",className:"rw-field-error"}),l.createElement(s.Label,{name:"players",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Players"),l.createElement(s.TextField,{name:"players",defaultValue:null===(h=e.juben)||void 0===h?void 0:h.players,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"players",className:"rw-field-error"}),l.createElement(s.Label,{name:"canSwitchSex",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Can switch sex"),l.createElement(s.CheckboxField,{name:"canSwitchSex",defaultChecked:null===(y=e.juben)||void 0===y?void 0:y.canSwitchSex,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(s.FieldError,{name:"canSwitchSex",className:"rw-field-error"}),l.createElement(s.Label,{name:"duration",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Duration"),l.createElement(s.NumberField,{name:"duration",defaultValue:null===(S=e.juben)||void 0===S?void 0:S.duration,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"duration",className:"rw-field-error"}),l.createElement(s.Label,{name:"price",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Price"),l.createElement(s.NumberField,{name:"price",defaultValue:null===(g=e.juben)||void 0===g?void 0:g.price,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(s.FieldError,{name:"price",className:"rw-field-error"}),l.createElement(s.Label,{name:"available",className:"rw-label",errorClassName:"rw-label rw-label-error"}),l.createElement(s.CheckboxField,{name:"available",defaultChecked:null===(C=e.juben)||void 0===C?void 0:C.available,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(s.FieldError,{name:"available",className:"rw-field-error"}),l.createElement(s.Label,{name:"mvps",className:"rw-label",errorClassName:"rw-label rw-label-error"}),l.createElement(u.ZP,{data:null===(j=e.juben)||void 0===j?void 0:j.mvps,name:"mvps"}),l.createElement(s.FieldError,{name:"mvps",className:"rw-field-error"}),l.createElement("div",{className:"rw-button-group"},l.createElement(s.Submit,{disabled:e.loading,className:"rw-button rw-button-blue"},"Save"))))}},41085:function(e,r,a){a.r(r),a.d(r,{default:function(){return p}});var n,t,l=a(27378),i=(a(95988),a(60740),a(31786)),o=a(27001),s=a(81006),m=a(21866);function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,n=new Array(r);a<r;a++)n[a]=e[a];return n}function u(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var d=(0,o.ZP)(n||(n=u(["\n  query EditJubenById($id: Int!) {\n    juben: juben(id: $id) {\n      id\n      name\n      score\n      image\n      desc\n      section\n      sections\n      players\n      canSwitchSex\n      duration\n      price\n      mvps {\n        id\n      }\n      timeSlots {\n        id\n      }\n      photos\n      available\n    }\n  }\n"]))),b=(0,o.ZP)(t||(t=u(["\n  mutation UpdateJubenMutation($id: Int!, $input: UpdateJubenInput!) {\n    updateJuben(id: $id, input: $input) {\n      id\n      name\n      score\n      image\n      desc\n      section\n      sections\n      players\n      canSwitchSex\n      duration\n      price\n      mvps {\n        id\n      }\n      timeSlots {\n        id\n      }\n      photos\n    }\n  }\n"]))),w=(0,i.createCell)({QUERY:d,beforeQuery:function(e){return{variables:e,fetchPolicy:"cache-and-network"}},Loading:function(){return l.createElement("div",null,"Loading...")},Failure:function(e){var r=e.error;return l.createElement("div",{className:"rw-cell-error"},r.message)},Success:function(e){var r,a,n=e.juben,t=e.refetch,o=(0,i.useMutation)(b,{onCompleted:function(){s.toast.success("Juben updated")},onError:function(e){s.toast.error(e.message)}}),u=(a=2,function(e){if(Array.isArray(e))return e}(r=o)||function(e,r){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,t,l,i,o=[],s=!0,m=!1;try{if(l=(a=a.call(e)).next,0===r){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=l.call(a)).done)&&(o.push(n.value),o.length!==r);s=!0);}catch(e){m=!0,t=e}finally{try{if(!s&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(m)throw t}}return o}}(r,a)||function(e,r){if(e){if("string"==typeof e)return c(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,r):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],w=u[1],p=w.loading,f=w.error;return l.createElement("div",{className:"rw-segment"},l.createElement("header",{className:"rw-segment-header"},l.createElement("h2",{className:"rw-heading rw-heading-secondary"},"Edit Juben ",n.id)),l.createElement("div",{className:"rw-segment-main"},l.createElement(m.Z,{juben:n,onSave:function(e,r){d({variables:{id:r,input:e}})},error:f,loading:p,refetch:t})))},displayName:"EditJubenCell"}),p=function(e){var r=e.id;return l.createElement(w,{id:r})}}}]);