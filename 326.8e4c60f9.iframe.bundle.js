"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[326],{84335:function(e,r,a){var l=a(27378),t=a(74857),n=a(30799),i=a(60622);r.Z=function(e){var r,a,o,m,s,u,d,c,w=(0,n.a)(),f=w.currentUser,b=w.isAuthenticated;return l.createElement("div",{className:"rw-form-wrapper"},l.createElement(t.Form,{onSubmit:function(r){var a;r.jubenId=parseInt(r.jubenId),e.onSave(r,null==e||null===(a=e.review)||void 0===a?void 0:a.id)},error:e.error},l.createElement(t.FormError,{error:e.error,wrapperClassName:"rw-form-error-wrapper",titleClassName:"rw-form-error-title",listClassName:"rw-form-error-list"}),l.createElement(t.Label,{name:"jubenId",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Juben id"),l.createElement(i.ZP,{id:null===(r=e.review)||void 0===r?void 0:r.jubenId,name:"jubenId"}),l.createElement(t.FieldError,{name:"jubenId",className:"rw-field-error"}),l.createElement(t.Label,{name:"dm",className:"rw-label",errorClassName:"rw-label rw-label-error"},"DM"),l.createElement(t.TextField,{name:"dm",defaultValue:null===(a=e.review)||void 0===a?void 0:a.dm,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(t.FieldError,{name:"dm",className:"rw-field-error"}),l.createElement(t.Label,{name:"rateOfJuben",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Rate of juben (1-5分)"),l.createElement(t.NumberField,{name:"rateOfJuben",defaultValue:null===(o=e.review)||void 0===o?void 0:o.rateOfJuben,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(t.FieldError,{name:"rateOfJuben",className:"rw-field-error"}),l.createElement(t.Label,{name:"reviewOfJuben",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Review of juben(关于剧本的评价)"),l.createElement(t.TextField,{name:"reviewOfJuben",defaultValue:null===(m=e.review)||void 0===m?void 0:m.reviewOfJuben,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"reviewOfJuben",className:"rw-field-error"}),l.createElement(t.Label,{name:"rateOfDM",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Rate of dm(1-5分)"),l.createElement(t.NumberField,{name:"rateOfDM",defaultValue:null===(s=e.review)||void 0===s?void 0:s.rateOfDM,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(t.FieldError,{name:"rateOfDM",className:"rw-field-error"}),l.createElement(t.Label,{name:"reviewOfDM",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Review of dm(关于DM的评价)"),l.createElement(t.TextField,{name:"reviewOfDM",defaultValue:null===(u=e.review)||void 0===u?void 0:u.reviewOfDM,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"reviewOfDM",className:"rw-field-error"}),l.createElement(t.Label,{name:"rateOfFood",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Rate of food(1-5)"),l.createElement(t.NumberField,{name:"rateOfFood",defaultValue:null===(d=e.review)||void 0===d?void 0:d.rateOfFood,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"rateOfFood",className:"rw-field-error"}),l.createElement(t.Label,{name:"reviewOfFood",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Review of food(关于剧本搭配食物的评价)"),l.createElement(t.TextField,{name:"reviewOfFood",defaultValue:null===(c=e.review)||void 0===c?void 0:c.reviewOfFood,className:"rw-input",errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"reviewOfFood",className:"rw-field-error"}),l.createElement(t.Label,{name:"userId",className:"rw-label",errorClassName:"rw-label rw-label-error"},"UserId"),b&&l.createElement(t.NumberField,{name:"userId",defaultValue:f.id,className:"rw-input",readOnly:!0,errorClassName:"rw-input rw-input-error"}),l.createElement(t.FieldError,{name:"userId",className:"rw-field-error"}),l.createElement("div",{className:"rw-button-group"},l.createElement(t.Submit,{disabled:e.loading,className:"rw-button rw-button-blue"},"Save"))))}},84326:function(e,r,a){a.r(r),a.d(r,{default:function(){return b}});var l,t=a(27378),n=(a(95988),a(60740),a(27001)),i=a(56423),o=a(31786),m=a(81006),s=a(84335);function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=e[a];return l}var d,c,w=(0,n.ZP)(l||(d=["\n  mutation CreateReviewMutation($input: CreateReviewInput!) {\n    createReview(input: $input) {\n      id\n    }\n  }\n"],c||(c=d.slice(0)),l=Object.freeze(Object.defineProperties(d,{raw:{value:Object.freeze(c)}})))),f=function(){var e,r,a=(0,o.useMutation)(w,{onCompleted:function(){m.toast.success("Review created"),(0,i.navigate)(i.routes.reviews())},onError:function(e){m.toast.error(e.message)}}),l=(r=2,function(e){if(Array.isArray(e))return e}(e=a)||function(e,r){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,t,n,i,o=[],m=!0,s=!1;try{if(n=(a=a.call(e)).next,0===r){if(Object(a)!==a)return;m=!1}else for(;!(m=(l=n.call(a)).done)&&(o.push(l.value),o.length!==r);m=!0);}catch(e){s=!0,t=e}finally{try{if(!m&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw t}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return u(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=l[0],d=l[1],c=d.loading,f=d.error;return t.createElement("div",{className:"rw-segment"},t.createElement("header",{className:"rw-segment-header"},t.createElement("h2",{className:"rw-heading rw-heading-secondary"},"New Review")),t.createElement("div",{className:"rw-segment-main"},t.createElement(s.Z,{onSave:function(e){e.createdAt=new Date,n({variables:{input:e}})},loading:c,error:f})))},b=function(){return t.createElement(f,null)}}}]);