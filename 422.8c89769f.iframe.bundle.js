"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[422],{94858:function(e,r,a){var l=a(27378),n=(a(76721),a(96085),a(74857)),t=a(74083),i=function(e){if(e)return e.replace(/:\d{2}\.\d{3}\w/,"")};r.Z=function(e){var r,a,o,u,s,m,d,c,b,w;return l.createElement("div",{className:"rw-form-wrapper"},l.createElement(n.Form,{onSubmit:function(r){var a,l,n;r.users&&r.users.length?r.users=null===(l=r.users)||void 0===l?void 0:l.map((function(e){return{id:parseInt(e)}})):delete r.users,r.bookings&&r.bookings.length?r.bookings=null===(n=r.bookings)||void 0===n?void 0:n.map((function(e){return{id:parseInt(e)}})):delete r.bookings,e.onSave(r,null==e||null===(a=e.jubenDrive)||void 0===a?void 0:a.id)},error:e.error},l.createElement(n.FormError,{error:e.error,wrapperClassName:"rw-form-error-wrapper",titleClassName:"rw-form-error-title",listClassName:"rw-form-error-list"}),l.createElement(n.Label,{name:"date",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Date"),l.createElement(n.DatetimeLocalField,{name:"date",defaultValue:i(null===(r=e.jubenDrive)||void 0===r?void 0:r.date),className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"date",className:"rw-field-error"}),l.createElement(n.Label,{name:"male",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Male"),l.createElement(n.NumberField,{name:"male",defaultValue:null===(a=e.jubenDrive)||void 0===a?void 0:a.male,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"male",className:"rw-field-error"}),l.createElement(n.Label,{name:"female",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Female"),l.createElement(n.NumberField,{name:"female",defaultValue:null===(o=e.jubenDrive)||void 0===o?void 0:o.female,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"female",className:"rw-field-error"}),l.createElement(n.Label,{name:"total",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Total"),l.createElement(n.NumberField,{name:"total",defaultValue:null===(u=e.jubenDrive)||void 0===u?void 0:u.total,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"total",className:"rw-field-error"}),l.createElement(n.Label,{name:"status",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Status"),l.createElement(n.TextField,{name:"status",defaultValue:null===(s=e.jubenDrive)||void 0===s?void 0:s.status,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"status",className:"rw-field-error"}),l.createElement(n.Label,{name:"jubenId",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Juben id"),l.createElement(n.NumberField,{name:"jubenId",defaultValue:null===(m=e.jubenDrive)||void 0===m?void 0:m.jubenId,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"jubenId",className:"rw-field-error"}),l.createElement(n.Label,{name:"timeSlotId",className:"rw-label",errorClassName:"rw-label rw-label-error"},"Time slot id"),l.createElement(n.NumberField,{name:"timeSlotId",defaultValue:null===(d=e.jubenDrive)||void 0===d?void 0:d.timeSlotId,className:"rw-input",errorClassName:"rw-input rw-input-error",validation:{required:!0}}),l.createElement(n.FieldError,{name:"timeSlotId",className:"rw-field-error"}),l.createElement(n.Label,{name:"users",className:"rw-label",errorClassName:"rw-label rw-label-error"}),l.createElement(t.ZP,{data:null===(c=e.jubenDrive)||void 0===c?void 0:c.users,name:"users"}),l.createElement(n.FieldError,{name:"users",className:"rw-field-error"}),l.createElement(n.Label,{name:"bookings",className:"rw-label",errorClassName:"rw-label rw-label-error"}),l.createElement(n.SelectField,{name:"bookings","aria-readonly":!0,multiple:!0,className:"rw-input",errorClassName:"rw-input rw-input-error"},null===(b=e.jubenDrive)||void 0===b||null===(w=b.bookings)||void 0===w?void 0:w.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.male,"男 ",e.female,"女 ",e.note)}))),l.createElement(n.FieldError,{name:"bookings",className:"rw-field-error"}),l.createElement("div",{className:"rw-button-group"},l.createElement(n.Submit,{disabled:e.loading,className:"rw-button rw-button-blue"},"Save"))))}},68422:function(e,r,a){a.r(r),a.d(r,{default:function(){return f}});var l,n,t=a(27378),i=(a(95988),a(60740),a(31786)),o=a(27001),u=a(56423),s=a(81006),m=a(94858);function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=e[a];return l}function c(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var b=(0,o.ZP)(l||(l=c(["\n  query EditJubenDriveById($id: Int!) {\n    jubenDrive: jubenDrive(id: $id) {\n      id\n      date\n      male\n      female\n      total\n      status\n      jubenId\n      timeSlotId\n      users {\n        id\n        name\n        email\n      }\n      bookings {\n        id\n        male\n        female\n        note\n      }\n    }\n  }\n"]))),w=(0,o.ZP)(n||(n=c(["\n  mutation UpdateJubenDriveMutation($id: Int!, $input: UpdateJubenDriveInput!) {\n    updateJubenDrive(id: $id, input: $input) {\n      id\n      date\n      male\n      female\n      total\n      status\n      jubenId\n      timeSlotId\n    }\n  }\n"]))),v=(0,i.createCell)({QUERY:b,Loading:function(){return t.createElement("div",null,"Loading...")},Failure:function(e){var r=e.error;return t.createElement("div",{className:"rw-cell-error"},null==r?void 0:r.message)},Success:function(e){var r,a,l=e.jubenDrive,n=(0,i.useMutation)(w,{onCompleted:function(){s.toast.success("JubenDrive updated"),(0,u.navigate)(u.routes.jubenDrives())},onError:function(e){s.toast.error(e.message)}}),o=(a=2,function(e){if(Array.isArray(e))return e}(r=n)||function(e,r){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,n,t,i,o=[],u=!0,s=!1;try{if(t=(a=a.call(e)).next,0===r){if(Object(a)!==a)return;u=!1}else for(;!(u=(l=t.call(a)).done)&&(o.push(l.value),o.length!==r);u=!0);}catch(e){s=!0,n=e}finally{try{if(!u&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw n}}return o}}(r,a)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,r):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],b=o[1],v=b.loading,f=b.error;return t.createElement("div",{className:"rw-segment"},t.createElement("header",{className:"rw-segment-header"},t.createElement("h2",{className:"rw-heading rw-heading-secondary"},"Edit JubenDrive ",null==l?void 0:l.id)),t.createElement("div",{className:"rw-segment-main"},t.createElement(m.Z,{jubenDrive:l,onSave:function(e,r){c({variables:{id:r,input:e}})},error:f,loading:v})))},displayName:"EditDriveCell"}),f=function(e){var r=e.id;return t.createElement(v,{id:r})}}}]);